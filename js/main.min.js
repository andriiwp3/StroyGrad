document.addEventListener("DOMContentLoaded",(()=>{!function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));document.querySelectorAll("video").forEach((e=>{e.classList.contains("_autoplay")&&e.play()})),$(document).ready((function(){$(".goto").click((function(){var e=$(this).attr("href").replace("#","");return $("body,html").animate({scrollTop:$("."+e).offset().top+0-$("header").height()},700,(function(){})),$(".menu__body").hasClass("active")&&($(".menu__body,.icon-menu").removeClass("active"),$("body").removeClass("lock"),$(".header__logo").removeClass("active")),!1}))}));let e=document.querySelector(".icon-menu"),t=document.querySelector("body"),o=document.querySelector(".menu__body");function s(e){$(".popup").removeClass("active").hide(),setTimeout((function(){$("body").addClass("lock")}),300),history.pushState("","","#"+e),$(".popup-"+e).fadeIn(300).delay(300).addClass("active"),$(".popup-"+e).find(".slick-slider").length>0&&$(".popup-"+e).find(".slick-slider").slick("setPosition")}function n(){$(".popup").removeClass("active").fadeOut(300),$(".menu__body").hasClass("active")||$("body").removeClass("lock"),history.pushState("","",window.location.href.split("#")[0])}e&&e.addEventListener("click",(function(){e.classList.toggle("active"),t.classList.toggle("lock"),o.classList.toggle("active")})),window.addEventListener("scroll",(()=>{let e=document.querySelector(".header");window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})),$(".pl").click((function(e){return s($(this).attr("href").replace("#","")),!1})),$(".popup-close,.popup__close").click((function(e){return n(),!1})),$(".popup").click((function(e){if(!$(e.target).is(".popup>.popup__container *")||$(e.target).is(".popup-close")||$(e.target).is(".popup__close"))return n(),!1})),$(document).on("keydown",(function(e){27==e.which&&n()}));(()=>{const e=document.forms;for(let o=0;o<e.length;o++){const s=e[o];s.addEventListener("submit",(e=>{e.preventDefault(),t(s)}))}async function t(e){let t=e.querySelector(".form__message");t&&(t.textContent="");let a=function(e){let t=0;const s=e.querySelectorAll("._req");for(let e=0;e<s.length;e++){const a=s[e];n(a),a.classList.contains("_email")?c(a)||(o(a),t++):a.classList.contains("_phone")?i(a)||(o(a),t++):a.value.trim().length<=1&&(o(a),t++)}return t}(e),l=new FormData(e);if(0===a){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){await t.json();s("succes"),e.reset(),e.classList.remove("_sending")}else s("fail"),e.classList.remove("_sending")}else t&&(t.textContent="Ошибка в одном или нескольких полях, проверьте коректность введенных данных",t.classList.add("active"))}function o(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function c(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase())}function i(e){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(String(e.value).toLowerCase())}})()}));